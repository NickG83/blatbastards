backend:
  name: github
  repo: NickG83/blatbastards
  branch: main
  base_url: "https://www.blatbastards.com"
  auth_endpoint: "api/auth"

# Optional: lets you run Decap locally if you ever dev locally
# local_backend: true

media_folder: "static/uploads"   # where uploaded files live in the repo
public_folder: "/uploads"        # how those files are referenced in the site

editor:
  preview: true

collections:
  # ------------------------
  # PAGES
  # ------------------------
  - name: "pages"
    label: "Pages"
    label_singular: "Page"
    folder: "content"
    create: true
    slug: "{{slug}}"
    format: "frontmatter"
    extension: "md"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Publish Date", name: "date", widget: "datetime" }
      - { label: "Body", name: "body", widget: "markdown" }

  # ------------------------
  # RIDES
  # ------------------------
  - name: "rides"
    label: "Rides"
    label_singular: "Ride"
    description: "Adventure rides, day trips and overnighters."
    folder: "content/rides"
    create: true
    slug: "{{slug}}"
    format: "frontmatter"
    extension: "md"

    # sort & summary should reflect the *ride date*, not publish date
    sortable_fields: ["rideDate", "title"]
    summary: "{{rideDate}} — {{title}} ({{region}})"

    fields:
      - { label: "Title", name: "title", widget: "string" }

      # Keep the page published: date = publish date (today/past)
      - label: "Publish Date"
        name: "date"
        widget: "datetime"
        date_format: "YYYY-MM-DD"
        time_format: false
        format: "YYYY-MM-DD"
        required: true
        default: "{{now}}"
        hint: "Controls publishing. Keep this today or earlier so the ride page appears on the site."

      # Actual ride date can be future
      - label: "Ride Date"
        name: "rideDate"
        widget: "datetime"
        date_format: "YYYY-MM-DD"
        time_format: false
        format: "YYYY-MM-DD"
        required: false
        hint: "The intended date of the ride. Used for sorting and upcoming/past logic."

      - label: "Region"
        name: "region"
        widget: "string"
        hint: "e.g. Brindabellas, Wee Jasper, Crookwell loop"

      - label: "Distance (km)"
        name: "distance"
        widget: "number"
        value_type: "int"
        required: false

      - label: "Duration"
        name: "duration"
        widget: "select"
        options: ["Half-Day", "Day", "Weekend", "Longer", "BLAT!"]
        default: "Day"

      - label: "Surface"
        name: "surface"
        widget: "select"
        options: ["Sealed", "Unsealed", "Mixed"]
        default: "Mixed"

      - label: "Meeting Point"
        name: "meeting_point"
        widget: "string"
        required: false

      - label: "Departure Time"
        name: "departure_time"
        widget: "string"
        required: false
        hint: "e.g. 08:00 at Caltex Yass"

      - label: "GPX File"
        name: "route_file"
        widget: "file"
        required: false
        hint: "Files in R2 Bucket, link prefix https://files.blatbastards.com/GPX/"

      - label: "Map Embed URL"
        name: "map_embed"
        widget: "string"
        required: false
        hint: "Google My Maps embed URL (the https://…/embed… link)."

      - label: "Hero Image"
        name: "hero_image"
        widget: "image"
        required: false
        hint: "Main image for the ride page."

      - label: "Gallery"
        name: "gallery"
        widget: "list"
        required: false
        summary: "{{fields.image}}"
        fields:
          - label: "Image"
            name: "image"
            widget: "image"
          - label: "Caption"
            name: "caption"
            widget: "string"
            required: false

      - label: "Short Intro"
        name: "intro"
        widget: "text"
        required: false
        hint: "One or two sentences for ride lists and previews."

      - label: "Ride Notes (full write-up)"
        name: "body"
        widget: "markdown"
        hint: "Full trip description, hazards, fuel stops, etc."

      - label: "YouTube Embed URL"
        name: "youtube_embed"
        widget: "string"
        required: false
        hint: "YouTube embed URL (the https://www.youtube.com/embed/... link)."

  # ------------------------
  # TOP ROADS
  # ------------------------
  - name: "top_roads"
    label: "Top Roads"
    label_singular: "Top Road"
    description: "Favourite roads worth riding."
    folder: "content/top-roads"
    create: true
    slug: "{{slug}}"
    format: "frontmatter"
    extension: "md"
    sortable_fields: ["state", "title"]
    summary: "{{state}} — {{title}} ({{region}})"

    fields:
      - { label: "Title", name: "title", widget: "string" }

      - label: "State"
        name: "state"
        widget: "select"
        options: ["NSW", "ACT", "VIC", "TAS"]
        default: "NSW"

      - label: "Region"
        name: "region"
        widget: "string"
        required: false
        hint: "e.g. Brindabellas, Snowies, Southern Highlands"

      - label: "Road Type"
        name: "surface"
        widget: "select"
        options: ["Sealed", "Unsealed", "Mixed"]
        default: "Sealed"

      - label: "Distance"
        name: "distance"
        widget: "number"
        value_type: "int"
        required: false
        hint: "Approx km for the highlight section"

      - label: "Start"
        name: "start"
        widget: "string"

      - label: "Finish"
        name: "finish"
        widget: "string"

      - label: "Short Intro"
        name: "intro"
        widget: "text"
        required: false
        hint: "One or two sentences shown near the top and in lists."

      - label: "Highlights"
        name: "highlights"
        widget: "list"
        required: false
        fields:
          - { label: "Highlight", name: "item", widget: "string" }

      - label: "Warnings / Notes"
        name: "warnings"
        widget: "list"
        required: false
        fields:
          - { label: "Warning", name: "item", widget: "string" }

      - label: "Map Link"
        name: "map_embed"
        widget: "string"
        required: false
        hint: "Google Maps link"

      - label: "GPX File"
        name: "route_file"
        widget: "file"
        required: false
        hint: "Files in R2 Bucket, link prefix https://files.blatbastards.com/GPX/"

      - label: "Hero Image"
        name: "hero_image"
        widget: "image"
        required: false

      - label: "Write-up"
        name: "body"
        widget: "markdown"

      - label: "Gallery"
        name: "gallery"
        widget: "list"
        required: false
        summary: "{{fields.image}}"
        fields:
          - { label: "Image", name: "image", widget: "image" }
          - { label: "Caption", name: "caption", widget: "string", required: false }
