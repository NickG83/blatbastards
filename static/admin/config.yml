backend:
  name: github
  repo: NickG83/blatbastards
  branch: main
  base_url: "https://test.blatbastards.com"
  auth_endpoint: "api/auth"

# Optional: lets you run Decap locally if you ever dev locally
# local_backend: true

media_folder: "static/uploads"   # where uploaded files live in the repo
public_folder: "/uploads"        # how those files are referenced in the site

editor:
  preview: true

collections:
  # ------------------------
  # PAGES (what you already had)
  # ------------------------
  - name: "pages"
    label: "Pages"
    label_singular: "Page"
    folder: "content"
    create: true
    slug: "{{slug}}"
    format: "frontmatter"
    extension: "md"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Publish Date", name: "date", widget: "datetime" }
      - { label: "Body", name: "body", widget: "markdown" }

    # ------------------------
  # RIDES
  # ------------------------
  - name: "rides"
    label: "Rides"
    label_singular: "Ride"
    description: "Adventure rides, day trips and overnighters."
    folder: "content/rides"
    create: true
    slug: "{{slug}}"
    format: "frontmatter"
    extension: "md"
    sortable_fields: ["date", "title"]
    summary: "{{date}} — {{title}} ({{region}})"

    fields:
      - { label: "Title", name: "title", widget: "string" }

      - label: "Ride Date"
        name: "date"              # <-- was ride_date; now drives Hugo .Date
        widget: "datetime"
        date_format: "YYYY-MM-DD"
        time_format: false
        format: "YYYY-MM-DD"
        required: false

      - label: "Region"
        name: "region"
        widget: "string"
        hint: "e.g. Brindabellas, Wee Jasper, Crookwell loop"

      - label: "Distance (km)"
        name: "distance"          # <-- was distance_km; matches .Params.distance
        widget: "number"
        value_type: "int"
        required: false

      - label: "Duration"
        name: "duration"          # <-- new; matches .Params.duration
        widget: "select"
        options: ["Half-Day", "Day", "Weekend", "Longer"]
        default: "Day"

      - label: "Surface"
        name: "surface"
        widget: "select"
        options: ["Sealed", "Unsealed", "Mixed"]
        default: "Mixed"

      - label: "Meeting Point"
        name: "meeting_point"
        widget: "string"
        required: false

      - label: "Departure Time"
        name: "departure_time"
        widget: "string"
        required: false
        hint: "e.g. 08:00 at Caltex Yass"

      - label: "GPX File"
        name: "route_file"
        widget: "file"
        required: false
        hint: "Files in R2 Bucket, link prefix https://files.blatbastards.com/GPX/"

      - label: "Map Embed URL"
        name: "map_embed"
        widget: "string"
        required: false
        hint: "Google My Maps embed URL (the https://…/embed… link)."

      - label: "Hero Image"
        name: "hero_image"
        widget: "image"
        required: false
        hint: "Main image for the ride page."

      - label: "Gallery"
        name: "gallery"
        widget: "list"
        required: false
        summary: "{{fields.image}}"
        fields:
          - label: "Image"
            name: "image"
            widget: "image"
          - label: "Caption"
            name: "caption"
            widget: "string"
            required: false

      - label: "Short Intro"
        name: "intro"
        widget: "text"
        required: false
        hint: "One or two sentences for ride lists and previews."

      - label: "Ride Notes (full write-up)"
        name: "body"
        widget: "markdown"
        hint: "Full trip description, hazards, fuel stops, etc."

      - label: "YouTube Embed URL"
        name: "youtube_embed"
        widget: "string"
        required: false
        hint: "YouTube embed URL (the https://www.youtube.com/embed/... link)."